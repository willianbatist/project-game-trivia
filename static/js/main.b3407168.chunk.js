(this["webpackJsonpproject-game-trivia"]=this["webpackJsonpproject-game-trivia"]||[]).push([[0],{30:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},34:function(e,t,a){e.exports=a(59)},39:function(e,t,a){},46:function(e,t,a){},49:function(e,t){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),s=a.n(c),o=(a(39),a(26)),i=a(6),l=a(2),u=a(16),m=a(3),p=a.n(m),d=a(13),f=a(4),h=a(5),b=a(21),g=a(8),v=a(7),y=function(e){return{type:"TOKEN",token:e}},E=function(e){return{type:"LOG_IN",player:e}},k=function(e,t){return{type:"SCORE",score:e,assertions:t}},S=function(){var e=Object(d.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://opentdb.com/api_token.php?command=request");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),O=a(30),w=a.n(O),j=(a(46),function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(f.a)(this,a),(e=t.call(this)).handleButton=function(){var t=Object(d.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S();case 2:n=t.sent,e.setState({token:n.token},(function(){a(e.state)})),localStorage.setItem("token",n.token),e.props.history.push("/game");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.roteSettings=function(){e.props.history.push("/settings")},e.state={token:"",name:"",assertions:0,score:0,gravatarEmail:""},e.handleInput=e.handleInput.bind(Object(b.a)(e)),e}return Object(h.a)(a,[{key:"handleInput",value:function(e){var t=e.target,a=t.id,n=t.value;this.setState(Object(u.a)({},a,n))}},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.gravatarEmail,c=this.props.handleClick;return r.a.createElement("div",{className:"login"},r.a.createElement("form",{className:"form",autocomplete:"off"},r.a.createElement("img",{src:w.a,className:"App-logo",alt:"logo"}),r.a.createElement("label",{htmlFor:"name",className:"form__label"},r.a.createElement("input",{id:"name","data-testid":"input-player-name",placeholder:"Name",value:a,onChange:this.handleInput,className:"form__label__input"})),r.a.createElement("label",{htmlFor:"email",className:"form__label"},r.a.createElement("input",{id:"gravatarEmail","data-testid":"input-gravatar-email",placeholder:"Email",value:n,onChange:this.handleInput,className:"form__label__input"})),r.a.createElement("section",{className:"buttons"},r.a.createElement("button",{type:"button","data-testid":"btn-play",disabled:!a||!n||!n.includes("@")||!n.includes(".com"),onClick:function(){return e.handleButton(c)},className:"form__button"},"Play!"),r.a.createElement("button",{type:"button","data-testid":"btn-settings",onClick:function(){return e.roteSettings()},className:"form__button settings"},"Settings"))))}}]),a}(n.Component)),N=Object(i.b)(null,(function(e){return{handleClick:function(t){e(E(t)),e(y(t.token))}}}))(j),_=a(14),C=a(22),x=a(23),I=a.n(x),T=(a(50),function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(f.a)(this,a),(e=t.call(this)).convertEmail=function(){var t=e.props.gravatarEmail;e.setState({emailHash:I()(t).toString()})},e.state={emailHash:""},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.convertEmail()}},{key:"render",value:function(){var e=this.props,t=e.name,a=e.score,n=this.state.emailHash;return r.a.createElement("header",{className:"header"},r.a.createElement("section",{className:"name-logo"},r.a.createElement("img",{"data-testid":"header-profile-picture",alt:"profile_image",src:"https://www.gravatar.com/avatar/".concat(n)}),r.a.createElement("h1",{className:"name"},"Player:"," ",r.a.createElement("span",{"data-testid":"header-player-name"},t))),r.a.createElement("h2",{className:"score"},"Score:"," ",r.a.createElement("span",{"data-testid":"header-score"},a)))}}]),a}(n.Component)),A=Object(i.b)((function(e){var t=e.player;return{name:t.name,gravatarEmail:t.gravatarEmail,assertions:t.assertions,score:t.score}}))(T),R=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props,t=e.answers,a=e.isDisabled,n=e.apiReturn,c=e.currQues,s=e.answerButton;return t.map((function(e,t){return r.a.createElement("button",{type:"button",key:t,"data-testid":e.match(n[c].correct_answer)?"correct-answer":"wrong-answer-".concat(t),className:"game-main__answer-section__answer",disabled:a,onClick:s},Object(C.decode)(e))}))}}]),a}(n.Component),F=function(){var e=Object(d.a)(p.a.mark((function e(t,a,n,r){var c,s,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c="https://opentdb.com/api.php?amount=5&token=".concat(t,"&category=").concat(a,"&difficulty=").concat(n,"&type=").concat(r),e.next=4,fetch(c);case 4:return s=e.sent,o=s.json(),e.abrupt("return",o);case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),M="game-main__answer-section__answer",B=(a(51),function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(f.a)(this,a),(e=t.call(this)).getQuestions=Object(d.a)(p.a.mark((function t(){var a,n,r,c,s,o,i,l,u,m,d,f,h,b,g,v;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.token,r=a.renewToken,c=a.category,s=a.difficulty,o=a.type,i=e.state.currQues,t.next=4,F(n,c,s,o);case 4:if(l=t.sent,t.prev=5,3!==l.response_code){t.next=21;break}return t.next=9,S();case 9:return u=t.sent,t.next=12,F(u.token,c,s,o);case 12:m=t.sent,d=m.results,f=d[i].incorrect_answers,h=d[i].correct_answer,"easy"===d[i].difficulty?e.setState({difScore:1}):"medium"===d[i].difficulty?e.setState({difScore:2}):"hard"===d[i].difficulty&&e.setState({difScore:3}),e.setState({apiReturn:m.results,currAnswers:[].concat(Object(_.a)(f),[h]).sort((function(){return Math.random()-.5}))}),r(u),t.next=26;break;case 21:b=l.results,g=b[i].incorrect_answers,v=b[i].correct_answer,"easy"===b[i].difficulty?e.setState({difScore:1}):"medium"===b[i].difficulty?e.setState({difScore:2}):"hard"===b[i].difficulty&&e.setState({difScore:3}),e.setState({apiReturn:l.results,currAnswers:[].concat(Object(_.a)(g),[v]).sort((function(){return Math.random()-.5}))});case 26:t.next=31;break;case 28:t.prev=28,t.t0=t.catch(5),console.error(t.t0);case 31:case"end":return t.stop()}}),t,null,[[5,28]])}))),e.handleTimer=function(){clearInterval(e.handleCounter),e.handleCounter=setInterval((function(){e.setState((function(e){return{time:e.time-1}})),0===e.state.time&&(clearInterval(e.handleCounter),e.setState({isDisabled:!0,time:30,answered:!0},(function(){Object(_.a)(document.getElementsByClassName(M)).forEach((function(e){return e.classList.add("wrong")}))})))}),1e3)},e.answerButton=function(t){var a=t.target,n=e.props.updateScore,r=e.state.time,c=Object(_.a)(document.getElementsByClassName(M));if(e.setState({isDisabled:!0}),"correct-answer"===a.dataset.testid){var s=e.state.difScore;e.setState((function(e){return{score:e.score+(10+r*s),assertions:e.assertions+1}}),(function(){var t=e.state,a=t.score,r=t.assertions;n(a,r),localStorage.setItem("score",a)}))}c.forEach((function(e){"correct-answer"===e.dataset.testid?e.classList.add("correct"):e.classList.add("wrong")})),e.setState({answered:!0}),clearInterval(e.handleCounter)},e.redToFeedback=function(){var t=e.props.history;localStorage.setItem("score",0),t.push("/feedback")},e.nextQuestion=function(){e.setState((function(e){return{answered:!1,currQues:e.currQues+1,isDisabled:!1}}),(function(){var t=e.state.currQues,a=e.state.apiReturn,n=a[t].incorrect_answers,r=a[t].correct_answer;e.setState({currAnswers:[].concat(Object(_.a)(n),[r]).sort((function(){return Math.random()-.5}))})})),Object(_.a)(document.getElementsByClassName("game-main__answer-section__answer")).forEach((function(e){"correct-answer"===e.dataset.testid?e.classList.remove("correct"):e.dataset.testid.indexOf("wrong")>-1&&e.classList.remove("wrong")})),e.setState({time:30},(function(){return e.handleTimer()}))},e.state={apiReturn:[],currAnswers:[],currQues:0,time:30,isDisabled:!1,score:0,assertions:0,difScore:0,answered:!1},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.getQuestions(),this.handleTimer()}},{key:"render",value:function(){var e=this.state,t=e.apiReturn,a=e.currQues,n=e.currAnswers,c=e.isDisabled,s=e.time,o=e.answered,i=!t.length>0;return r.a.createElement("div",{className:"game"},r.a.createElement(A,null),i?r.a.createElement("h1",{className:"game-loading"},"Loading..."):r.a.createElement("main",{className:"game-main"},r.a.createElement("h4",{"data-testid":"question-category",className:"game-main__category"},t[a].category),r.a.createElement("h3",{"data-testid":"question-text",className:"game-main__question"},Object(C.decode)(t[a].question)),r.a.createElement("section",{"data-testid":"answer-options",className:"game-main__answers-section"},r.a.createElement(R,{answers:n,isDisabled:c,apiReturn:t,currQues:a,answerButton:this.answerButton})),o&&(a<4?r.a.createElement("button",{type:"button","data-testid":"btn-next",className:"game-main__next-button",onClick:this.nextQuestion},"Next!"):r.a.createElement("button",{type:"button","data-testid":"btn-next",className:"game-main__next-button",onClick:this.redToFeedback},"Final Feedback"))),r.a.createElement("footer",{className:"footerTime"},r.a.createElement("h4",null,"Timer:  ".concat(s))))}}]),a}(n.Component)),D=Object(i.b)((function(e){var t=e.token,a=e.player.score,n=e.settings;return{token:t,score:a,category:n.category,difficulty:n.difficulty,type:n.type}}),(function(e){return{renewToken:function(t){e(y(t))},updateScore:function(t,a){e(k(t,a))}}}))(B),Q=(a(52),function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(f.a)(this,a),(e=t.call(this)).handleSelect=function(t){var a=t.target,n=a.value,r=a.id;e.setState(Object(u.a)({},r,n))},e.saveSettings=function(){var t=e.props.setSettings,a=e.state,n=a.category,r=a.difficulty,c=a.type;t("&category=".concat(n),"&difficulty=".concat(r),"&type=".concat(c)),window.alert("Settings Saved!")},e.homeButton=function(){e.props.history.push("/project-game-trivia")},e.state={category:"",difficulty:"",type:""},e}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{"data-testid":"settings-title",className:"settingsScreen"},r.a.createElement("h1",{className:"headerSettings"},"Settings"),r.a.createElement("section",{className:"container"},r.a.createElement("label",{htmlFor:"category",className:"settings__label"},"Questions Category:",r.a.createElement("select",{className:"select",id:"category",onChange:this.handleSelect},r.a.createElement("option",{value:"any"},"Any Category"),r.a.createElement("option",{value:"9"},"General Knowledge"),r.a.createElement("option",{value:"10"},"Entertainment: Books"),r.a.createElement("option",{value:"11"},"Entertainment: Film"),r.a.createElement("option",{value:"12"},"Entertainment: Music"),r.a.createElement("option",{value:"13"},"Entertainment: Musicals & Theatres"),r.a.createElement("option",{value:"14"},"Entertainment: Television"),r.a.createElement("option",{value:"15"},"Entertainment: Video Games"),r.a.createElement("option",{value:"16"},"Entertainment: Board Games"),r.a.createElement("option",{value:"17"},"Science & Nature"),r.a.createElement("option",{value:"18"},"Science: Computers"),r.a.createElement("option",{value:"19"},"Science: Mathematics"),r.a.createElement("option",{value:"20"},"Mythology"),r.a.createElement("option",{value:"21"},"Sports"),r.a.createElement("option",{value:"22"},"Geography"),r.a.createElement("option",{value:"23"},"History"),r.a.createElement("option",{value:"24"},"Politics"),r.a.createElement("option",{value:"25"},"Art"),r.a.createElement("option",{value:"26"},"Celebrities"),r.a.createElement("option",{value:"27"},"Animals"),r.a.createElement("option",{value:"28"},"Vehicles"),r.a.createElement("option",{value:"29"},"Entertainment: Comics"),r.a.createElement("option",{value:"30"},"Science: Gadgets"),r.a.createElement("option",{value:"31"},"Entertainment: Japanese Anime & Manga"),r.a.createElement("option",{value:"32"},"Entertainment: Cartoon & Animations"))),r.a.createElement("label",{htmlFor:"difficulty",className:"settings__label"},"Difficulty:",r.a.createElement("select",{className:"select",id:"difficulty",onChange:this.handleSelect},r.a.createElement("option",{value:"any"},"Any difficulty"),r.a.createElement("option",{value:"easy"},"Easy"),r.a.createElement("option",{value:"medium"},"Medium"),r.a.createElement("option",{value:"hard"},"Hard"))),r.a.createElement("label",{htmlFor:"type",className:"settings__label"},"Questions Type:",r.a.createElement("select",{className:"select",id:"type",onChange:this.handleSelect},r.a.createElement("option",{value:"any"},"Any type"),r.a.createElement("option",{value:"multiple"},"Multiple choice"),r.a.createElement("option",{value:"boolean"},"True / False"))),r.a.createElement("div",{className:"btns"},r.a.createElement("button",{className:"btn1",type:"button",onClick:this.saveSettings},"Save Settings"),r.a.createElement("button",{className:"btn2",type:"button",onClick:this.homeButton},"Home"))))}}]),a}(n.Component)),G=Object(i.b)(null,(function(e){return{setSettings:function(t,a,n){e(function(e,t,a){return{type:"SETTINGS",category:e,difficulty:t,qType:a}}(t,a,n))}}}))(Q),H=(a(53),function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(f.a)(this,a),(e=t.call(this)).resultsHandler=function(){var t=e.props.assertions;t<3?e.setState({scoreFeedback:"Could be better..."}):t>=3&&e.setState({scoreFeedback:"Well Done!"})},e.playAgain=function(){var t=e.props,a=t.history;(0,t.resetGame)(0,0,{}),a.push("/project-game-trivia")},e.toRankingPage=function(){e.props.history.push("/ranking")},e.state={scoreFeedback:""},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.resultsHandler()}},{key:"render",value:function(){var e=this.state.scoreFeedback,t=this.props,a=t.score,n=t.assertions;return r.a.createElement("div",{className:"feedback"},r.a.createElement(A,null),r.a.createElement("section",{className:"container"},r.a.createElement("h1",null,"Score:"," ",r.a.createElement("span",{"data-testid":"feedback-total-score"},a)),r.a.createElement("h1",null,"Assertions:"," ",r.a.createElement("span",{"data-testid":"feedback-total-question"},n)),r.a.createElement("h1",{"data-testid":"feedback-text"},e),r.a.createElement("button",{className:"btn",type:"button","data-testid":"btn-play-again",onClick:this.playAgain},"Play again!"),r.a.createElement("button",{className:"btn",type:"button","data-testid":"btn-ranking",onClick:this.toRankingPage},"Ranking")))}}]),a}(n.Component)),q=Object(i.b)((function(e){return{score:e.player.score,assertions:e.player.assertions}}),(function(e){return{resetGame:function(t,a,n){e(k(t,a)),e(E(n))}}}))(H),L=(a(54),function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(f.a)(this,a),(e=t.call(this)).handleRanking=Object(d.a)(p.a.mark((function t(){var a,n,r,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props,n=a.name,r=a.score,c=a.picture,n&&(localStorage.getItem("ranking")?localStorage.setItem("ranking",JSON.stringify([].concat(Object(_.a)(JSON.parse(localStorage.getItem("ranking"))),[{name:n,score:r,picture:c}]))):localStorage.setItem("ranking",JSON.stringify([{name:n,score:r,picture:c}]))),e.setState({ranking:JSON.parse(localStorage.getItem("ranking"))});case 3:case"end":return t.stop()}}),t)}))),e.goHome=function(){var t=e.props,a=t.history;(0,t.resetGame)(0,0,{}),a.push("/project-game-trivia")},e.state={ranking:[]},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.handleRanking()}},{key:"render",value:function(){var e=this.state.ranking;return r.a.createElement("div",{className:"ranking"},r.a.createElement("section",{className:"container"},r.a.createElement("h1",{"data-testid":"ranking-title"},"Ranking"),r.a.createElement("ul",{className:"ranking-players"},e.sort((function(e,t){return t.score-e.score})).map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("h4",null,"Name:"," ",r.a.createElement("span",{"data-testid":"player-name-".concat(t)},e.name)),r.a.createElement("h4",null,"Score:"," ",r.a.createElement("span",{"data-testid":"player-score-".concat(t)},e.score)))}))),r.a.createElement("button",{type:"button","data-testid":"btn-go-home",className:"btn",onClick:this.goHome},"Home")))}}]),a}(n.Component)),J=Object(i.b)((function(e){return{name:e.player.name,score:e.player.score,assertions:e.player.assertions,picture:"".concat(I()(e.player.assertions).toString())}}),(function(e){return{resetGame:function(t,a,n){e(k(t,a)),e(E(n))}}}))(L);a(55);function P(){return r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/project-game-trivia",component:N}),r.a.createElement(l.a,{exact:!0,path:"/game",component:D}),r.a.createElement(l.a,{exact:!0,path:"/settings",component:G}),r.a.createElement(l.a,{exact:!0,path:"/feedback",component:q}),r.a.createElement(l.a,{exact:!0,path:"/ranking",component:J}))}var K=a(17),V=a(32),W=a(33),z=a(18),U={name:"",assertions:0,score:0,gravatarEmail:""},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN":return t.player;case"SCORE":return Object(z.a)(Object(z.a)({},e),{},{score:t.score,assertions:t.assertions});default:return e}},Y={category:"",difficulty:"",type:""},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETTINGS":return Object(z.a)(Object(z.a)({},e),{},{category:t.category,difficulty:t.difficulty,type:t.qType});default:return e}},$={token:""},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOKEN":return t.token;default:return e}},te=Object(K.combineReducers)({player:X,token:ee,settings:Z}),ae=Object(K.createStore)(te,Object(V.composeWithDevTools)(Object(K.applyMiddleware)(W.a)));window.Cypress&&(window.store=ae);var ne=ae;s.a.render(r.a.createElement(o.a,null,r.a.createElement(i.a,{store:ne},r.a.createElement(P,null))),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.b3407168.chunk.js.map