(this["webpackJsonpproject-game-trivia"]=this["webpackJsonpproject-game-trivia"]||[]).push([[0],{29:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},33:function(e,t,a){e.exports=a(56)},38:function(e,t,a){},45:function(e,t,a){},47:function(e,t){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(18),c=a.n(s),o=(a(38),a(23)),i=a(10),u=a(2),l=a(19),m=a(3),d=a.n(m),p=a(13),f=a(8),h=a(9),b=a(20),g=a(12),v=a(11),k=function(e){return{type:"TOKEN",token:e}},y=function(e){return{type:"LOG_IN",player:e}},E=function(e,t){return{type:"SCORE",score:e,assertions:t}},w=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://opentdb.com/api_token.php?command=request");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),O=a(29),S=a.n(O),j=(a(45),function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(f.a)(this,a),(e=t.call(this)).handleButton=function(){var t=Object(p.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w();case 2:n=t.sent,e.setState({token:n.token},(function(){a(e.state)})),localStorage.setItem("token",n.token),e.props.history.push("/game");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.roteSettings=function(){e.props.history.push("/settings")},e.state={token:"",name:"",assertions:0,score:0,gravatarEmail:""},e.handleInput=e.handleInput.bind(Object(b.a)(e)),e}return Object(h.a)(a,[{key:"handleInput",value:function(e){var t=e.target,a=t.id,n=t.value;this.setState(Object(l.a)({},a,n))}},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.gravatarEmail,s=this.props.handleClick;return r.a.createElement("div",{className:"login"},r.a.createElement("button",{type:"button","data-testid":"btn-settings",onClick:function(){return e.roteSettings()},className:"form__button"},"Settings"),r.a.createElement("form",{className:"form"},r.a.createElement("img",{src:S.a,className:"App-logo",alt:"logo"}),r.a.createElement("label",{htmlFor:"name",className:"form__label"},r.a.createElement("input",{id:"name","data-testid":"input-player-name",placeholder:"Name",value:a,onChange:this.handleInput,className:"form__label__input"})),r.a.createElement("label",{htmlFor:"email",className:"form__label"},r.a.createElement("input",{id:"gravatarEmail","data-testid":"input-gravatar-email",placeholder:"Email",value:n,onChange:this.handleInput,className:"form__label__input"})),r.a.createElement("button",{type:"button","data-testid":"btn-play",disabled:!a||!n,onClick:function(){return e.handleButton(s)},className:"form__button"},"Play!")))}}]),a}(n.Component)),_=Object(i.b)(null,(function(e){return{handleClick:function(t){e(y(t)),e(k(t.token))}}}))(j),N=a(14),x=a(21),C=a.n(x),I=(a(48),function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(f.a)(this,a),(e=t.call(this)).convertEmail=function(){var t=e.props.gravatarEmail;e.setState({emailHash:C()(t).toString()})},e.state={emailHash:""},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.convertEmail()}},{key:"render",value:function(){var e=this.props,t=e.name,a=e.score,n=this.state.emailHash;return r.a.createElement("header",{className:"header"},r.a.createElement("img",{"data-testid":"header-profile-picture",alt:"profile_image",src:"https://www.gravatar.com/avatar/".concat(n)}),r.a.createElement("h1",{className:"name"},"Player:"," ",r.a.createElement("span",{"data-testid":"header-player-name"},t)),r.a.createElement("h2",{className:"score"},"Score:"," ",r.a.createElement("span",{"data-testid":"header-score"},a)))}}]),a}(n.Component)),R=Object(i.b)((function(e){var t=e.player;return{name:t.name,gravatarEmail:t.gravatarEmail,assertions:t.assertions,score:t.score}}))(I),T=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="https://opentdb.com/api.php?amount=5&token=".concat(t),e.next=4,fetch(a);case 4:return n=e.sent,r=n.json(),e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),D="game-main__answer-section__answer",Q=(a(49),function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(f.a)(this,a),(e=t.call(this)).getQuestions=Object(p.a)(d.a.mark((function t(){var a,n,r,s,c,o,i,u,l,m,p,f,h;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.token,r=a.renewToken,s=e.state.currQues,t.next=4,T(n);case 4:if(3!==(c=t.sent).response_code){t.next=20;break}return t.next=8,w();case 8:return o=t.sent,t.next=11,T(o.token);case 11:i=t.sent,u=i.results,l=u[s].incorrect_answers,m=u[s].correct_answer,"easy"===u[s].difficulty?e.setState({difScore:1}):"medium"===u[s].difficulty?e.setState({difScore:2}):"hard"===u[s].difficulty&&e.setState({difScore:3}),e.setState({apiReturn:i.results,currAnswers:[].concat(Object(N.a)(l),[m]).sort((function(){return Math.random()-.5}))}),r(o),t.next=25;break;case 20:p=c.results,f=p[s].incorrect_answers,h=p[s].correct_answer,"easy"===p[s].difficulty?e.setState({difScore:1}):"medium"===p[s].difficulty?e.setState({difScore:2}):"hard"===p[s].difficulty&&e.setState({difScore:3}),e.setState({apiReturn:c.results,currAnswers:[].concat(Object(N.a)(f),[h]).sort((function(){return Math.random()-.5}))});case 25:case"end":return t.stop()}}),t)}))),e.handleTimer=function(){clearInterval(e.handleCounter),e.handleCounter=setInterval((function(){e.setState((function(e){return{time:e.time-1}})),0===e.state.time&&(clearInterval(e.handleCounter),e.setState({isDisabled:!0,time:30,answered:!0},(function(){Object(N.a)(document.getElementsByClassName(D)).forEach((function(e){return e.classList.add("wrong")}))})))}),1e3)},e.answerButton=function(t){var a=t.target,n=e.props.updateScore,r=e.state.time,s=Object(N.a)(document.getElementsByClassName(D));if(e.setState({isDisabled:!0}),"correct-answer"===a.dataset.testid){var c=e.state.difScore;e.setState((function(e){return{score:e.score+(10+r*c),assertions:e.assertions+1}}),(function(){var t=e.state,a=t.score,r=t.assertions;n(a,r),localStorage.setItem("score",a)}))}s.forEach((function(e){"correct-answer"===e.dataset.testid?e.classList.add("correct"):e.classList.add("wrong")})),e.setState({answered:!0}),clearInterval(e.handleCounter)},e.redToFeedback=function(){var t=e.props.history;localStorage.setItem("score",0),t.push("/feedback")},e.nextQuestion=function(){e.setState((function(e){return{answered:!1,currQues:e.currQues+1,isDisabled:!1}}),(function(){var t=e.state.currQues,a=e.state.apiReturn,n=a[t].incorrect_answers,r=a[t].correct_answer;e.setState({currAnswers:[].concat(Object(N.a)(n),[r]).sort((function(){return Math.random()-.5}))})})),Object(N.a)(document.getElementsByClassName("game-main__answer-section__answer")).forEach((function(e){"correct-answer"===e.dataset.testid?e.classList.remove("correct"):e.dataset.testid.indexOf("wrong")>-1&&e.classList.remove("wrong")})),e.setState({time:30},(function(){return e.handleTimer()}))},e.state={apiReturn:[],currAnswers:[],currQues:0,time:30,isDisabled:!1,score:0,assertions:0,difScore:0,answered:!1},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.getQuestions(),this.handleTimer()}},{key:"render",value:function(){var e=this,t=this.state,a=t.apiReturn,n=t.currQues,s=t.currAnswers,c=t.isDisabled,o=t.time,i=t.answered,u=!a.length>0;return r.a.createElement("div",{className:"game"},r.a.createElement(R,null),u?r.a.createElement("h1",{className:"game-loading"},"Loading..."):r.a.createElement("main",{className:"game-main"},r.a.createElement("h4",{"data-testid":"question-category",className:"game-main__category"},a[n].category),r.a.createElement("h3",{"data-testid":"question-text",className:"game-main__question"},a[n].question),r.a.createElement("section",{"data-testid":"answer-options",className:"game-main__answers-section"},s.map((function(t,s){return r.a.createElement("button",{type:"button",key:s,"data-testid":t.match(a[n].correct_answer)?"correct-answer":"wrong-answer-".concat(s),className:"game-main__answer-section__answer",disabled:c,onClick:e.answerButton},t)}))),i&&(n<4?r.a.createElement("button",{type:"button","data-testid":"btn-next",className:"game-main__next-button",onClick:this.nextQuestion},"Pr\xf3xima quest\xe3o"):r.a.createElement("button",{type:"button","data-testid":"btn-next",className:"game-main__next-button",onClick:this.redToFeedback},"Feedback final"))),r.a.createElement("footer",{className:"footerTime"},r.a.createElement("h4",null,"Timer:  ".concat(o))))}}]),a}(n.Component)),A=Object(i.b)((function(e){return{token:e.token,score:e.player.score}}),(function(e){return{renewToken:function(t){e(k(t))},updateScore:function(t,a){e(E(t,a))}}}))(Q),F=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{"data-testid":"settings-title",className:"settings"},r.a.createElement("h1",{className:"headerSettings"},"Settings"))}}]),a}(n.Component),B=(a(50),function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(f.a)(this,a),(e=t.call(this)).resultsHandler=function(){var t=e.props.assertions;t<3?e.setState({scoreFeedback:"Could be better..."}):t>=3&&e.setState({scoreFeedback:"Well Done!"})},e.playAgain=function(){var t=e.props,a=t.history;(0,t.resetGame)(0,0,{}),a.push("/project-game-trivia")},e.toRankingPage=function(){e.props.history.push("/ranking")},e.state={scoreFeedback:""},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.resultsHandler()}},{key:"render",value:function(){var e=this.state.scoreFeedback,t=this.props,a=t.score,n=t.assertions;return r.a.createElement("div",{className:"feedback"},r.a.createElement(R,null),r.a.createElement("section",{className:"container"},r.a.createElement("h1",null,"Score:"," ",r.a.createElement("span",{"data-testid":"feedback-total-score"},a)),r.a.createElement("h1",null,"Assertions:"," ",r.a.createElement("span",{"data-testid":"feedback-total-question"},n)),r.a.createElement("h1",{"data-testid":"feedback-text"},e),r.a.createElement("button",{className:"btn",type:"button","data-testid":"btn-ranking",onClick:this.toRankingPage},"Ranking"),r.a.createElement("button",{className:"btn",type:"button","data-testid":"btn-play-again",onClick:this.playAgain},"Play again!")))}}]),a}(n.Component)),H=Object(i.b)((function(e){return{score:e.player.score,assertions:e.player.assertions}}),(function(e){return{resetGame:function(t,a,n){e(E(t,a)),e(y(n))}}}))(B),L=(a(51),function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(f.a)(this,a),(e=t.call(this)).handleRanking=Object(p.a)(d.a.mark((function t(){var a,n,r,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props,n=a.name,r=a.score,s=a.picture,n&&(localStorage.getItem("ranking")?localStorage.setItem("ranking",JSON.stringify([].concat(Object(N.a)(JSON.parse(localStorage.getItem("ranking"))),[{name:n,score:r,picture:s}]))):localStorage.setItem("ranking",JSON.stringify([{name:n,score:r,picture:s}]))),e.setState({ranking:JSON.parse(localStorage.getItem("ranking"))});case 3:case"end":return t.stop()}}),t)}))),e.goHome=function(){var t=e.props,a=t.history;(0,t.resetGame)(0,0,{}),a.push("/project-game-trivia")},e.state={ranking:[]},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.handleRanking()}},{key:"render",value:function(){var e=this.state.ranking;return r.a.createElement("div",{className:"ranking"},r.a.createElement("section",{className:"container"},r.a.createElement("h1",{"data-testid":"ranking-title"},"Ranking"),r.a.createElement("ul",{className:"ranking-players"},e.sort((function(e,t){return t.score-e.score})).map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("h4",null,"Name:"," ",r.a.createElement("span",{"data-testid":"player-name-".concat(t)},e.name)),r.a.createElement("h4",null,"Score:"," ",r.a.createElement("span",{"data-testid":"player-score-".concat(t)},e.score)))}))),r.a.createElement("button",{type:"button","data-testid":"btn-go-home",className:"btn",onClick:this.goHome},"Home")))}}]),a}(n.Component)),M=Object(i.b)((function(e){return{name:e.player.name,score:e.player.score,assertions:e.player.assertions,picture:"".concat(C()(e.player.assertions).toString())}}),(function(e){return{resetGame:function(t,a,n){e(E(t,a)),e(y(n))}}}))(L);a(52);function q(){return r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/project-game-trivia",component:_}),r.a.createElement(u.a,{exact:!0,path:"/game",component:A}),r.a.createElement(u.a,{exact:!0,path:"/settings",component:F}),r.a.createElement(u.a,{exact:!0,path:"/feedback",component:H}),r.a.createElement(u.a,{exact:!0,path:"/ranking",component:M}))}var G=a(16),J=a(31),P=a(32),K=a(25),W={player:{name:"",assertions:0,score:0,gravatarEmail:""}},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN":return t.player;case"SCORE":return Object(K.a)(Object(K.a)({},e),{},{score:t.score,assertions:t.assertions});default:return e}},U={token:""},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOKEN":return t.token;default:return e}},X=Object(G.combineReducers)({player:z,token:V}),Y=Object(G.createStore)(X,Object(J.composeWithDevTools)(Object(G.applyMiddleware)(P.a)));window.Cypress&&(window.store=Y);var Z=Y;c.a.render(r.a.createElement(o.a,null,r.a.createElement(i.a,{store:Z},r.a.createElement(q,null))),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.d395bd0a.chunk.js.map